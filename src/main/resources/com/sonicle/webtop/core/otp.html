<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
		<title>${title}</title>
		<link rel="icon" href="resources/com.sonicle.webtop.core/images/favicon.png" type="image/png" />
		
		<!-- Bootstrap -->
		<link href="resources/com.sonicle.webtop.core/css/bootstrap.min.css" rel="stylesheet">
		<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
		<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
		<!--[if lt IE 9]>
			<script src="resources/js/html5shiv-3.7.2.min.js"></script>
			<script src="resources/js/respond-1.4.2.min.js"></script>
		<![endif]-->
		
		<link href="resources/com.sonicle.webtop.core/css/login.css" rel="stylesheet">
		<script type="text/javascript">
			function onBodyLoad() {
				setTimeout(function() {
					document.getElementById("wtfakecode").focus();
				}, 100);
			}
			function onFakecodeKeyPress(evt) {
				var e = evt || window.event,
						charCode = (e.which) ? e.which : e.keyCode;
				if(charCode === 13) {
					e.stopPropagation();
					e.preventDefault();
					submit();
				}
			}
			function onSubmitClick() {
				submit();
			}
			function submit() {
				// We need to implement this value swap in order to circumvent a 
				// partucular behaviour in FF: autocomplete='off' attribute is
				// ignored by default (see https://bugzilla.mozilla.org/show_bug.cgi?id=956906)
				var form = document.forms['login'],
						code = form['wtfakecode'].value,
						trust = form['wttrust'].checked;
				form.reset();
				form['wtcode'].value = code;
				form['wttrust'].checked = trust;
				form.submit();
			}
		</script>
	</head>
	<body onload="onBodyLoad()">
		<div class="login">
			<div class="container">
				<div class="row">
					<div class="col-xs-12 col-sm-8 col-sm-offset-2 col-md-6 col-md-offset-3 col-lg-4 col-lg-offset-4">
						<h3 class="text-center">${helpTitle}</h3>
						<form name="login" method="post">
							<div class="box">
								<img class="delivery img-responsive" src="resources/com.sonicle.webtop.core/images/otp-${deliveryMode}.png">
								<h5>${deliveryInfo}</h5>
								<#if showFailure>
								<p class="text-center text-danger">
									<span class="glyphicon glyphicon-exclamation-sign"></span>
									${failureMessage}
								</p>
								</#if>
								<div class="form-group">
									<div class="input-group">
										<input type="hidden" id="wtcode" name="wtcode">
										<input class="form-control" id="wtfakecode" name="wtfakecode" type="password" placeholder="${codePlaceholder}" autocomplete="off" maxlength="6" onkeypress="onFakecodeKeyPress(event)">
										<div class="input-group-addon"><i class="glyphicon glyphicon-lock"></i></div>
									</div>
								</div>
								<br>
								<button class="btn btn-primary full-width" type="sumbit" onclick="onSubmitClick()">${submitLabel}</button>
								<#if showTrustCheckbox>
								<div class="checkbox">
									<label><input type="checkbox" id="wttrust" name="wttrust" value="true"> ${trustLabel}</label>
								</div>
								</#if>
							</div>
						</form>
					</div>
				</div>
				<div class="row">
					<div class="col-xs-12 col-sm-10 col-sm-offset-1 col-md-10 col-md-offset-1 col-lg-8 col-lg-offset-2">
						<img class="powered img-responsive" src="resources/com.sonicle.webtop.core/images/poweredby.png">
						<h5 class="powered text-center"><small>v.${version.getMajor()}.${version.getMinor()}</small></h5>
					</div>
				</div>
			</div>
		</div>
	</body>
</html>
